{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import axios from\"axios\";import\"./Navbar.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=_ref=>{let{searchTerm,setSearchTerm,selectedCategory,setSelectedCategory,categories=[],onLoginClick,onRegisterClick,user,onLogout,onProfileClick,onLogoClick,theme,toggleTheme}=_ref;const[menuOpen,setMenuOpen]=useState(false);const[userProfile,setUserProfile]=useState(null);const[profilePhoto,setProfilePhoto]=useState(null);const menuRef=useRef();const[localSearchTerm,setLocalSearchTerm]=useState(searchTerm);useEffect(()=>{if(user!==null&&user!==void 0&&user.userId){setUserProfile(null);setProfilePhoto(null);const timer=setTimeout(()=>loadUserProfile(),100);return()=>clearTimeout(timer);}else{setUserProfile(null);setProfilePhoto(null);}},[user===null||user===void 0?void 0:user.userId,user===null||user===void 0?void 0:user.username]);useEffect(()=>{if(userProfile!==null&&userProfile!==void 0&&userProfile.profileImageBase64&&user!==null&&user!==void 0&&user.userId){if(userProfile.profileImageBase64.startsWith(\"data:image/\")){// Base64 formatı\nsetProfilePhoto(userProfile.profileImageBase64);}else if(userProfile.profileImageBase64.startsWith(\"/\")){// Dosya yolu formatı\nconst API_BASE_URL=localStorage.getItem(\"API_BASE_URL\");setProfilePhoto(`${API_BASE_URL}${userProfile.profileImageBase64}`);}else{// Diğer formatlar için placeholder\nsetProfilePhoto(null);}}else{setProfilePhoto(null);}},[userProfile===null||userProfile===void 0?void 0:userProfile.profileImageBase64,user===null||user===void 0?void 0:user.userId]);const loadUserProfile=async()=>{if(!(user!==null&&user!==void 0&&user.userId))return;try{const API_BASE_URL=localStorage.getItem(\"API_BASE_URL\");const existsRes=await axios.get(`${API_BASE_URL}/api/UserProfile/ProfileExists/${user.userId}`);if(existsRes.data){var _res$data;const res=await axios.get(`${API_BASE_URL}/api/UserProfile/GetUserProfile/${user.userId}`);if(((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.userId)===user.userId){setUserProfile(res.data);}}}catch(err){console.error(\"Navbar - Profil yüklenemedi:\",err);setUserProfile(null);}};const handleSearchChange=e=>{const newValue=e.target.value;setLocalSearchTerm(newValue);setSearchTerm(newValue);};const handleLogoClick=()=>{if(onLogoClick){onLogoClick();}// Ana sayfaya yönlendir\nwindow.location.href='/';};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"logo-area\",onClick:handleLogoClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"logo-icon\",children:\"\\uD83C\\uDF72\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"logo\",children:\"Tarif Kap\\u0131da\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tarif ara...\",className:\"search-input\",value:localSearchTerm,onChange:handleSearchChange})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-right\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"theme-toggle-btn\",onClick:toggleTheme,children:theme===\"dark\"?\"☀️\":\"🌙\"}),user!==null&&user!==void 0&&user.username?/*#__PURE__*/_jsxs(\"div\",{className:\"nav-profile\",ref:menuRef,children:[/*#__PURE__*/_jsxs(\"button\",{className:\"nav-profile-btn\",onClick:()=>setMenuOpen(v=>!v),children:[profilePhoto?/*#__PURE__*/_jsx(\"img\",{src:profilePhoto,alt:\"Profil\",className:\"nav-profile-photo\"}):/*#__PURE__*/_jsx(\"span\",{className:\"nav-profile-icon\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"span\",{children:user.username||user.email})]}),menuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"nav-profile-menu\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onProfileClick,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDC64\"}),\"Profilim\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDEAA\"}),\"\\xC7\\u0131k\\u0131\\u015F\"]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"nav-auth\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"nav-auth-btn\",onClick:onLoginClick,children:\"Giri\\u015F Yap\"}),/*#__PURE__*/_jsx(\"button\",{className:\"nav-auth-btn\",onClick:onRegisterClick,children:\"\\xDCye Ol\"})]})]})]})});};export default/*#__PURE__*/React.memo(Navbar);","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","Navbar","_ref","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","categories","onLoginClick","onRegisterClick","user","onLogout","onProfileClick","onLogoClick","theme","toggleTheme","menuOpen","setMenuOpen","userProfile","setUserProfile","profilePhoto","setProfilePhoto","menuRef","localSearchTerm","setLocalSearchTerm","userId","timer","setTimeout","loadUserProfile","clearTimeout","username","profileImageBase64","startsWith","API_BASE_URL","localStorage","getItem","existsRes","get","data","_res$data","res","err","console","error","handleSearchChange","e","newValue","target","value","handleLogoClick","window","location","href","className","children","onClick","type","placeholder","onChange","ref","v","src","alt","email","memo"],"sources":["C:/Users/x_user/Desktop/Internship-Project-TarifKapidaFrontend/src/components/Navbar/Navbar.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./Navbar.css\";\n\nconst Navbar = ({\n  searchTerm,\n  setSearchTerm,\n  selectedCategory,\n  setSelectedCategory,\n  categories = [],\n  onLoginClick,\n  onRegisterClick,\n  user,\n  onLogout,\n  onProfileClick,\n  onLogoClick,\n  theme,\n  toggleTheme,\n}) => {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [userProfile, setUserProfile] = useState(null);\n  const [profilePhoto, setProfilePhoto] = useState(null);\n  const menuRef = useRef();\n  const [localSearchTerm, setLocalSearchTerm] = useState(searchTerm);\n\n  useEffect(() => {\n    if (user?.userId) {\n      setUserProfile(null);\n      setProfilePhoto(null);\n      const timer = setTimeout(() => loadUserProfile(), 100);\n      return () => clearTimeout(timer);\n    } else {\n      setUserProfile(null);\n      setProfilePhoto(null);\n    }\n  }, [user?.userId, user?.username]);\n\n  useEffect(() => {\n    if (userProfile?.profileImageBase64 && user?.userId) {\n      if (userProfile.profileImageBase64.startsWith(\"data:image/\")) {\n        // Base64 formatı\n        setProfilePhoto(userProfile.profileImageBase64);\n      } else if (userProfile.profileImageBase64.startsWith(\"/\")) {\n        // Dosya yolu formatı\n        const API_BASE_URL = localStorage.getItem(\"API_BASE_URL\");\n        setProfilePhoto(`${API_BASE_URL}${userProfile.profileImageBase64}`);\n      } else {\n        // Diğer formatlar için placeholder\n        setProfilePhoto(null);\n      }\n    } else {\n      setProfilePhoto(null);\n    }\n  }, [userProfile?.profileImageBase64, user?.userId]);\n\n  const loadUserProfile = async () => {\n    if (!user?.userId) return;\n    try {\n      const API_BASE_URL = localStorage.getItem(\"API_BASE_URL\");\n\n      const existsRes = await axios.get(`${API_BASE_URL}/api/UserProfile/ProfileExists/${user.userId}`);\n      if (existsRes.data) {\n        const res = await axios.get(`${API_BASE_URL}/api/UserProfile/GetUserProfile/${user.userId}`);\n        if (res.data?.userId === user.userId) {\n          setUserProfile(res.data);\n        }\n      }\n    } catch (err) {\n      console.error(\"Navbar - Profil yüklenemedi:\", err);\n      setUserProfile(null);\n    }\n  };\n\n  const handleSearchChange = (e) => {\n    const newValue = e.target.value;\n    setLocalSearchTerm(newValue);\n    setSearchTerm(newValue);\n  };\n\n  const handleLogoClick = () => {\n    if (onLogoClick) {\n      onLogoClick();\n    }\n    // Ana sayfaya yönlendir\n    window.location.href = '/';\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-container\">\n        {/* Sol taraf - Logo */}\n        <div className=\"navbar-left\">\n          <div className=\"logo-area\" onClick={handleLogoClick}>\n            <span className=\"logo-icon\">🍲</span>\n            <h2 className=\"logo\">Tarif Kapıda</h2>\n          </div>\n        </div>\n\n        {/* Orta - Arama */}\n        <div className=\"navbar-center\">\n          <div className=\"search-container\">\n            <span className=\"search-icon\">🔍</span>\n            <input\n              type=\"text\"\n              placeholder=\"Tarif ara...\"\n              className=\"search-input\"\n              value={localSearchTerm}\n              onChange={handleSearchChange}\n            />\n          </div>\n        </div>\n\n        {/* Sağ taraf - Kullanıcı profili ve tema */}\n        <div className=\"navbar-right\">\n          <button className=\"theme-toggle-btn\" onClick={toggleTheme}>\n            {theme === \"dark\" ? \"☀️\" : \"🌙\"}\n          </button>\n          \n          {user?.username ? (\n            <div className=\"nav-profile\" ref={menuRef}>\n              <button className=\"nav-profile-btn\" onClick={() => setMenuOpen((v) => !v)}>\n                {profilePhoto ? (\n                  <img src={profilePhoto} alt=\"Profil\" className=\"nav-profile-photo\" />\n                ) : (\n                  <span className=\"nav-profile-icon\">👤</span>\n                )}\n                <span>{user.username || user.email}</span>\n              </button>\n              {menuOpen && (\n                <div className=\"nav-profile-menu\">\n                  <button onClick={onProfileClick}>\n                    <span>👤</span>\n                    Profilim\n                  </button>\n                  <button onClick={onLogout}>\n                    <span>🚪</span>\n                    Çıkış\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"nav-auth\">\n              <button className=\"nav-auth-btn\" onClick={onLoginClick}>\n                Giriş Yap\n              </button>\n              <button className=\"nav-auth-btn\" onClick={onRegisterClick}>\n                Üye Ol\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default React.memo(Navbar);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}