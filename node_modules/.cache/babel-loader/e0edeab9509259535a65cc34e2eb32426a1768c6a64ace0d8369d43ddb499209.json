{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import\"./RegisterForm.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterForm=_ref=>{let{onRegisterSuccess,onClose,onSwitchToLogin}=_ref;const[username,setUsername]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const API_BASE_URL=localStorage.getItem(\"API_BASE_URL\")||\"tarifkapida.up.railway.app\";const handleSubmit=async e=>{e.preventDefault();setError(\"\");// Şifre kontrolü\nif(password!==confirmPassword){setError(\"Şifreler eşleşmiyor.\");return;}if(password.length<6){setError(\"Şifre en az 6 karakter olmalıdır.\");return;}setLoading(true);try{const response=await axios.post(`${API_BASE_URL}/api/User/Register`,{username,email,password});const user=response.data;localStorage.setItem(\"user\",JSON.stringify(user));localStorage.setItem(\"token\",user.token||\"\");onRegisterSuccess(user);if(onClose)onClose();}catch(err){var _err$response,_err$response2;console.error(\"Kayıt hatası:\",err);if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===409){setError(\"Bu kullanıcı adı veya e-posta zaten kullanılıyor.\");}else if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===400){setError(\"Geçersiz bilgiler. Lütfen kontrol edin.\");}else{setError(\"Kayıt olurken bir hata oluştu. Lütfen tekrar deneyin.\");}}finally{setLoading(false);}};const handleClose=()=>{if(onClose)onClose();};const handleSwitchToLogin=()=>{if(onSwitchToLogin)onSwitchToLogin();};return/*#__PURE__*/_jsx(\"div\",{className:\"register-form\",onClick:handleClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-form-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:handleClose,children:\"\\u2715\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-form-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register-form-title\",children:\"\\xDCye Ol\"}),/*#__PURE__*/_jsx(\"p\",{className:\"register-form-subtitle\",children:\"Yeni hesap olu\\u015Fturun\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Kullan\\u0131c\\u0131 Ad\\u0131\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",placeholder:\"Kullan\\u0131c\\u0131 ad\\u0131n\\u0131z\",value:username,onChange:e=>setUsername(e.target.value),required:true,disabled:loading,minLength:3})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"E-posta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-input\",placeholder:\"E-posta adresiniz\",value:email,onChange:e=>setEmail(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u015Eifre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",placeholder:\"\\u015Eifreniz (en az 6 karakter)\",value:password,onChange:e=>setPassword(e.target.value),required:true,disabled:loading,minLength:6})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u015Eifre Tekrar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",placeholder:\"\\u015Eifrenizi tekrar girin\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true,disabled:loading})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:loading,children:loading?\"Kayıt olunuyor...\":\"Üye Ol\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-footer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"switch-form-text\",children:\"Zaten hesab\\u0131n\\u0131z var m\\u0131?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"switch-form-btn\",onClick:handleSwitchToLogin,children:\"Giri\\u015F Yap\"})]})]})});};export default RegisterForm;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","RegisterForm","_ref","onRegisterSuccess","onClose","onSwitchToLogin","username","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","error","setError","loading","setLoading","API_BASE_URL","localStorage","getItem","handleSubmit","e","preventDefault","length","response","post","user","data","setItem","JSON","stringify","token","err","_err$response","_err$response2","console","status","handleClose","handleSwitchToLogin","className","onClick","children","stopPropagation","onSubmit","type","placeholder","value","onChange","target","required","disabled","minLength"],"sources":["C:/Users/x_user/Desktop/Internship-Project-TarifKapidaFrontend/src/components/Auth/RegisterForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./RegisterForm.css\";\r\n\r\nconst RegisterForm = ({ onRegisterSuccess, onClose, onSwitchToLogin }) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const API_BASE_URL = localStorage.getItem(\"API_BASE_URL\") || \"tarifkapida.up.railway.app\";\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    // Şifre kontrolü\r\n    if (password !== confirmPassword) {\r\n      setError(\"Şifreler eşleşmiyor.\");\r\n      return;\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      setError(\"Şifre en az 6 karakter olmalıdır.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/User/Register`, {\r\n        username,\r\n        email,\r\n        password,\r\n      });\r\n\r\n      const user = response.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      localStorage.setItem(\"token\", user.token || \"\");\r\n\r\n      onRegisterSuccess(user);\r\n      if (onClose) onClose();\r\n    } catch (err) {\r\n      console.error(\"Kayıt hatası:\", err);\r\n      if (err.response?.status === 409) {\r\n        setError(\"Bu kullanıcı adı veya e-posta zaten kullanılıyor.\");\r\n      } else if (err.response?.status === 400) {\r\n        setError(\"Geçersiz bilgiler. Lütfen kontrol edin.\");\r\n      } else {\r\n        setError(\"Kayıt olurken bir hata oluştu. Lütfen tekrar deneyin.\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  const handleSwitchToLogin = () => {\r\n    if (onSwitchToLogin) onSwitchToLogin();\r\n  };\r\n\r\n  return (\r\n    <div className=\"register-form\" onClick={handleClose}>\r\n      <div className=\"register-form-content\" onClick={(e) => e.stopPropagation()}>\r\n        <button className=\"close-btn\" onClick={handleClose}>\r\n          ✕\r\n        </button>\r\n        \r\n        <div className=\"register-form-header\">\r\n          <h2 className=\"register-form-title\">Üye Ol</h2>\r\n          <p className=\"register-form-subtitle\">Yeni hesap oluşturun</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Kullanıcı Adı</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-input\"\r\n              placeholder=\"Kullanıcı adınız\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n              minLength={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">E-posta</label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-input\"\r\n              placeholder=\"E-posta adresiniz\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Şifre</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-input\"\r\n              placeholder=\"Şifreniz (en az 6 karakter)\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n              minLength={6}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Şifre Tekrar</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-input\"\r\n              placeholder=\"Şifrenizi tekrar girin\"\r\n              value={confirmPassword}\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n\r\n          <button \r\n            type=\"submit\" \r\n            className=\"submit-btn\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Kayıt olunuyor...\" : \"Üye Ol\"}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"form-footer\">\r\n          <span className=\"switch-form-text\">\r\n            Zaten hesabınız var mı?\r\n          </span>\r\n          <button \r\n            type=\"button\" \r\n            className=\"switch-form-btn\"\r\n            onClick={handleSwitchToLogin}\r\n          >\r\n            Giriş Yap\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegisterForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}