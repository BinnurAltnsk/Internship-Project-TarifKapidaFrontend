{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import RecipeList from\"../components/Recipe/RecipeList\";import{jsx as _jsx}from\"react/jsx-runtime\";const HomePage=_ref=>{let{user,searchTerm=\"\",selectedCategory=\"\"}=_ref;const[recipes,setRecipes]=useState([]);const[favorites,setFavorites]=useState([]);const[loading,setLoading]=useState(true);const API_BASE_URL=localStorage.getItem(\"API_BASE_URL\")||\"http://localhost:5043\";const token=localStorage.getItem(\"token\");// Tüm tarifleri getir\nuseEffect(()=>{const fetchRecipes=async()=>{setLoading(true);try{const res=await axios.get(`${API_BASE_URL}/api/Recipe/GetRecipes`);setRecipes(res.data);}catch(err){console.error(\"Tarifler yüklenemedi:\",err);// Hata durumunda örnek veriler göster\nsetRecipes([{recipeId:1,recipeName:\"Fırında Tavuk\",description:\"Fırında baharatlı ve sebzeli tavuk tarifi.\",category:\"Ana Yemek\",cookingTime:\"45\",difficulty:\"Orta\",rating:4.5,imageUrl:null},{recipeId:2,recipeName:\"Mercimek Çorbası\",description:\"Geleneksel Türk mutfağının vazgeçilmez çorbası.\",category:\"Çorba\",cookingTime:\"30\",difficulty:\"Kolay\",rating:4.8,imageUrl:null},{recipeId:3,recipeName:\"Tiramisu\",description:\"İtalyan mutfağının meşhur tatlısı.\",category:\"Tatlı\",cookingTime:\"20\",difficulty:\"Orta\",rating:4.6,imageUrl:null}]);}finally{setLoading(false);}};fetchRecipes();},[]);// Favori tarifleri getir\nuseEffect(()=>{const fetchFavorites=async()=>{if(!(user!==null&&user!==void 0&&user.userId)||!token)return;try{const res=await axios.get(`${API_BASE_URL}/api/Favorite/GetFavoritesByUserId/${user.userId}`,{headers:{Authorization:`Bearer ${token}`}});setFavorites(res.data);}catch(err){console.error(\"Favoriler yüklenemedi:\",err);}};fetchFavorites();},[user,token]);// Favoriye ekle\nconst addToFavorites=async recipeId=>{if(!user)return;try{await axios.post(`${API_BASE_URL}/api/Favorite/AddToFavorites`,{userId:user.userId,recipeId},{headers:{Authorization:`Bearer ${token}`}});setFavorites([...favorites,{recipeId}]);}catch(err){console.error(\"Favoriye eklenemedi:\",err);}};// Favoriden çıkar\nconst removeFromFavorites=async recipeId=>{if(!user)return;try{await axios.post(`${API_BASE_URL}/api/Favorite/RemoveFromFavorites`,{userId:user.userId,recipeId},{headers:{Authorization:`Bearer ${token}`}});setFavorites(favorites.filter(fav=>fav.recipeId!==recipeId));}catch(err){console.error(\"Favoriden çıkarılamadı:\",err);}};// Tarifleri filtrele (arama ve kategoriye göre)\nconst filteredRecipes=recipes.filter(recipe=>{var _recipe$recipeName;const nameMatch=(_recipe$recipeName=recipe.recipeName)===null||_recipe$recipeName===void 0?void 0:_recipe$recipeName.toLowerCase().includes(searchTerm.toLowerCase());const categoryMatch=selectedCategory?recipe.category===selectedCategory:true;return nameMatch&&categoryMatch;});if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"home-page\",children:/*#__PURE__*/_jsx(RecipeList,{recipes:filteredRecipes,favorites:favorites,onAddFavorite:addToFavorites,onRemoveFavorite:removeFromFavorites,user:user})});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","axios","RecipeList","jsx","_jsx","HomePage","_ref","user","searchTerm","selectedCategory","recipes","setRecipes","favorites","setFavorites","loading","setLoading","API_BASE_URL","localStorage","getItem","token","fetchRecipes","res","get","data","err","console","error","recipeId","recipeName","description","category","cookingTime","difficulty","rating","imageUrl","fetchFavorites","userId","headers","Authorization","addToFavorites","post","removeFromFavorites","filter","fav","filteredRecipes","recipe","_recipe$recipeName","nameMatch","toLowerCase","includes","categoryMatch","className","children","onAddFavorite","onRemoveFavorite"],"sources":["C:/Users/x_user/Desktop/Internship-Project-TarifKapidaFrontend/src/pages/HomePage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport RecipeList from \"../components/Recipe/RecipeList\";\r\n\r\nconst HomePage = ({ user, searchTerm = \"\", selectedCategory = \"\" }) => {\r\n  const [recipes, setRecipes] = useState([]);\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const API_BASE_URL = localStorage.getItem(\"API_BASE_URL\") || \"http://localhost:5043\";\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  // Tüm tarifleri getir\r\n  useEffect(() => {\r\n    const fetchRecipes = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await axios.get(`${API_BASE_URL}/api/Recipe/GetRecipes`);\r\n        setRecipes(res.data);\r\n      } catch (err) {\r\n        console.error(\"Tarifler yüklenemedi:\", err);\r\n        // Hata durumunda örnek veriler göster\r\n        setRecipes([\r\n          {\r\n            recipeId: 1,\r\n            recipeName: \"Fırında Tavuk\",\r\n            description: \"Fırında baharatlı ve sebzeli tavuk tarifi.\",\r\n            category: \"Ana Yemek\",\r\n            cookingTime: \"45\",\r\n            difficulty: \"Orta\",\r\n            rating: 4.5,\r\n            imageUrl: null\r\n          },\r\n          {\r\n            recipeId: 2,\r\n            recipeName: \"Mercimek Çorbası\",\r\n            description: \"Geleneksel Türk mutfağının vazgeçilmez çorbası.\",\r\n            category: \"Çorba\",\r\n            cookingTime: \"30\",\r\n            difficulty: \"Kolay\",\r\n            rating: 4.8,\r\n            imageUrl: null\r\n          },\r\n          {\r\n            recipeId: 3,\r\n            recipeName: \"Tiramisu\",\r\n            description: \"İtalyan mutfağının meşhur tatlısı.\",\r\n            category: \"Tatlı\",\r\n            cookingTime: \"20\",\r\n            difficulty: \"Orta\",\r\n            rating: 4.6,\r\n            imageUrl: null\r\n          }\r\n        ]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRecipes();\r\n  }, []);\r\n\r\n  // Favori tarifleri getir\r\n  useEffect(() => {\r\n    const fetchFavorites = async () => {\r\n      if (!user?.userId || !token) return;\r\n      try {\r\n        const res = await axios.get(\r\n          `${API_BASE_URL}/api/Favorite/GetFavoritesByUserId/${user.userId}`,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        setFavorites(res.data);\r\n      } catch (err) {\r\n        console.error(\"Favoriler yüklenemedi:\", err);\r\n      }\r\n    };\r\n\r\n    fetchFavorites();\r\n  }, [user, token]);\r\n\r\n  // Favoriye ekle\r\n  const addToFavorites = async (recipeId) => {\r\n    if (!user) return;\r\n    try {\r\n      await axios.post(\r\n        `${API_BASE_URL}/api/Favorite/AddToFavorites`,\r\n        { userId: user.userId, recipeId },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setFavorites([...favorites, { recipeId }]);\r\n    } catch (err) {\r\n      console.error(\"Favoriye eklenemedi:\", err);\r\n    }\r\n  };\r\n\r\n  // Favoriden çıkar\r\n  const removeFromFavorites = async (recipeId) => {\r\n    if (!user) return;\r\n    try {\r\n      await axios.post(\r\n        `${API_BASE_URL}/api/Favorite/RemoveFromFavorites`,\r\n        { userId: user.userId, recipeId },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setFavorites(favorites.filter((fav) => fav.recipeId !== recipeId));\r\n    } catch (err) {\r\n      console.error(\"Favoriden çıkarılamadı:\", err);\r\n    }\r\n  };\r\n\r\n  // Tarifleri filtrele (arama ve kategoriye göre)\r\n  const filteredRecipes = recipes.filter((recipe) => {\r\n    const nameMatch = recipe.recipeName?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const categoryMatch = selectedCategory ? recipe.category === selectedCategory : true;\r\n    return nameMatch && categoryMatch;\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"home-page\">\r\n      <RecipeList\r\n        recipes={filteredRecipes}\r\n        favorites={favorites}\r\n        onAddFavorite={addToFavorites}\r\n        onRemoveFavorite={removeFromFavorites}\r\n        user={user}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEzD,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAsD,IAArD,CAAEC,IAAI,CAAEC,UAAU,CAAG,EAAE,CAAEC,gBAAgB,CAAG,EAAG,CAAC,CAAAH,IAAA,CAChE,KAAM,CAACI,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACY,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAgB,YAAY,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,EAAI,uBAAuB,CACpF,KAAM,CAAAC,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C;AACAnB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BL,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAM,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,GAAGN,YAAY,wBAAwB,CAAC,CACpEL,UAAU,CAACU,GAAG,CAACE,IAAI,CAAC,CACtB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC3C;AACAb,UAAU,CAAC,CACT,CACEgB,QAAQ,CAAE,CAAC,CACXC,UAAU,CAAE,eAAe,CAC3BC,WAAW,CAAE,4CAA4C,CACzDC,QAAQ,CAAE,WAAW,CACrBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,GAAG,CACXC,QAAQ,CAAE,IACZ,CAAC,CACD,CACEP,QAAQ,CAAE,CAAC,CACXC,UAAU,CAAE,kBAAkB,CAC9BC,WAAW,CAAE,iDAAiD,CAC9DC,QAAQ,CAAE,OAAO,CACjBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAE,OAAO,CACnBC,MAAM,CAAE,GAAG,CACXC,QAAQ,CAAE,IACZ,CAAC,CACD,CACEP,QAAQ,CAAE,CAAC,CACXC,UAAU,CAAE,UAAU,CACtBC,WAAW,CAAE,oCAAoC,CACjDC,QAAQ,CAAE,OAAO,CACjBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE,GAAG,CACXC,QAAQ,CAAE,IACZ,CAAC,CACF,CAAC,CACJ,CAAC,OAAS,CACRnB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDK,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN;AACArB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,EAAC5B,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAE6B,MAAM,GAAI,CAACjB,KAAK,CAAE,OAC7B,GAAI,CACF,KAAM,CAAAE,GAAG,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CACzB,GAAGN,YAAY,sCAAsCT,IAAI,CAAC6B,MAAM,EAAE,CAClE,CAAEC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUnB,KAAK,EAAG,CAAE,CAClD,CAAC,CACDN,YAAY,CAACQ,GAAG,CAACE,IAAI,CAAC,CACxB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,GAAG,CAAC,CAC9C,CACF,CAAC,CAEDW,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAAC5B,IAAI,CAAEY,KAAK,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAoB,cAAc,CAAG,KAAO,CAAAZ,QAAQ,EAAK,CACzC,GAAI,CAACpB,IAAI,CAAE,OACX,GAAI,CACF,KAAM,CAAAN,KAAK,CAACuC,IAAI,CACd,GAAGxB,YAAY,8BAA8B,CAC7C,CAAEoB,MAAM,CAAE7B,IAAI,CAAC6B,MAAM,CAAET,QAAS,CAAC,CACjC,CAAEU,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUnB,KAAK,EAAG,CAAE,CAClD,CAAC,CACDN,YAAY,CAAC,CAAC,GAAGD,SAAS,CAAE,CAAEe,QAAS,CAAC,CAAC,CAAC,CAC5C,CAAE,MAAOH,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEF,GAAG,CAAC,CAC5C,CACF,CAAC,CAED;AACA,KAAM,CAAAiB,mBAAmB,CAAG,KAAO,CAAAd,QAAQ,EAAK,CAC9C,GAAI,CAACpB,IAAI,CAAE,OACX,GAAI,CACF,KAAM,CAAAN,KAAK,CAACuC,IAAI,CACd,GAAGxB,YAAY,mCAAmC,CAClD,CAAEoB,MAAM,CAAE7B,IAAI,CAAC6B,MAAM,CAAET,QAAS,CAAC,CACjC,CAAEU,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUnB,KAAK,EAAG,CAAE,CAClD,CAAC,CACDN,YAAY,CAACD,SAAS,CAAC8B,MAAM,CAAEC,GAAG,EAAKA,GAAG,CAAChB,QAAQ,GAAKA,QAAQ,CAAC,CAAC,CACpE,CAAE,MAAOH,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC/C,CACF,CAAC,CAED;AACA,KAAM,CAAAoB,eAAe,CAAGlC,OAAO,CAACgC,MAAM,CAAEG,MAAM,EAAK,KAAAC,kBAAA,CACjD,KAAM,CAAAC,SAAS,EAAAD,kBAAA,CAAGD,MAAM,CAACjB,UAAU,UAAAkB,kBAAA,iBAAjBA,kBAAA,CAAmBE,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACzC,UAAU,CAACwC,WAAW,CAAC,CAAC,CAAC,CACrF,KAAM,CAAAE,aAAa,CAAGzC,gBAAgB,CAAGoC,MAAM,CAACf,QAAQ,GAAKrB,gBAAgB,CAAG,IAAI,CACpF,MAAO,CAAAsC,SAAS,EAAIG,aAAa,CACnC,CAAC,CAAC,CAEF,GAAIpC,OAAO,CAAE,CACX,mBACEV,IAAA,QAAK+C,SAAS,CAAC,SAAS,CAAAC,QAAA,cACtBhD,IAAA,QAAK+C,SAAS,CAAC,SAAS,CAAM,CAAC,CAC5B,CAAC,CAEV,CAEA,mBACE/C,IAAA,QAAK+C,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBhD,IAAA,CAACF,UAAU,EACTQ,OAAO,CAAEkC,eAAgB,CACzBhC,SAAS,CAAEA,SAAU,CACrByC,aAAa,CAAEd,cAAe,CAC9Be,gBAAgB,CAAEb,mBAAoB,CACtClC,IAAI,CAAEA,IAAK,CACZ,CAAC,CACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAF,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}