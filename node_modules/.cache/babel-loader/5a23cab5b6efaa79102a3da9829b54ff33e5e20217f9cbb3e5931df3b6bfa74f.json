{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import\"./LoginForm.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=_ref=>{let{onSuccess,onClose,onSwitchToRegister}=_ref;const[usernameOrEmail,setUsernameOrEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const API_BASE_URL=localStorage.getItem(\"API_BASE_URL\");const handleSubmit=async e=>{e.preventDefault();setError(\"\");setLoading(true);try{const response=await axios.post(`${API_BASE_URL}/api/User/Login`,{email:usernameOrEmail,// username yerine email gönder\npassword:password});const user=response.data;localStorage.setItem(\"user\",JSON.stringify(user));localStorage.setItem(\"token\",user.token||\"\");onSuccess(user);if(onClose)onClose();}catch(err){var _err$response,_err$response2,_err$response3;console.error(\"Giriş hatası:\",err);if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){setError(\"E-posta veya şifre hatalı.\");}else if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===404){setError(\"Kullanıcı bulunamadı.\");}else if(((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)===400){setError(\"Geçersiz veri formatı. Lütfen kontrol edin.\");}else{setError(\"Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.\");}}finally{setLoading(false);}};const handleClose=()=>{if(onClose)onClose();};const handleSwitchToRegister=()=>{if(onSwitchToRegister)onSwitchToRegister();};return/*#__PURE__*/_jsx(\"div\",{className:\"login-form\",onClick:handleClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:handleClose,children:\"\\u2715\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login-form-title\",children:\"Giri\\u015F Yap\"}),/*#__PURE__*/_jsx(\"p\",{className:\"login-form-subtitle\",children:\"Hesab\\u0131n\\u0131za giri\\u015F yap\\u0131n\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"E-posta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-input\",placeholder:\"E-posta adresiniz\",value:usernameOrEmail,onChange:e=>setUsernameOrEmail(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u015Eifre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-input\",placeholder:\"\\u015Eifreniz\",value:password,onChange:e=>setPassword(e.target.value),required:true,disabled:loading})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:loading,children:loading?\"Giriş yapılıyor...\":\"Giriş Yap\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-footer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"switch-form-text\",children:\"Hesab\\u0131n\\u0131z yok mu?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"switch-form-btn\",onClick:handleSwitchToRegister,children:\"\\xDCye Ol\"})]})]})});};export default LoginForm;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","onSuccess","onClose","onSwitchToRegister","usernameOrEmail","setUsernameOrEmail","password","setPassword","error","setError","loading","setLoading","API_BASE_URL","localStorage","getItem","handleSubmit","e","preventDefault","response","post","email","user","data","setItem","JSON","stringify","token","err","_err$response","_err$response2","_err$response3","console","status","handleClose","handleSwitchToRegister","className","onClick","children","stopPropagation","onSubmit","type","placeholder","value","onChange","target","required","disabled"],"sources":["C:/Users/x_user/Desktop/Internship-Project-TarifKapidaFrontend/src/components/Auth/LoginForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./LoginForm.css\";\r\n\r\nconst LoginForm = ({ onSuccess, onClose, onSwitchToRegister }) => {\r\n  const [usernameOrEmail, setUsernameOrEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const API_BASE_URL = localStorage.getItem(\"API_BASE_URL\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_BASE_URL}/api/User/Login`, {\r\n        email: usernameOrEmail, // username yerine email gönder\r\n        password: password,\r\n      });\r\n\r\n      const user = response.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      localStorage.setItem(\"token\", user.token || \"\");\r\n\r\n      onSuccess(user);\r\n      if (onClose) onClose();\r\n    } catch (err) {\r\n      console.error(\"Giriş hatası:\", err);\r\n      if (err.response?.status === 401) {\r\n        setError(\"E-posta veya şifre hatalı.\");\r\n      } else if (err.response?.status === 404) {\r\n        setError(\"Kullanıcı bulunamadı.\");\r\n      } else if (err.response?.status === 400) {\r\n        setError(\"Geçersiz veri formatı. Lütfen kontrol edin.\");\r\n      } else {\r\n        setError(\"Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  const handleSwitchToRegister = () => {\r\n    if (onSwitchToRegister) onSwitchToRegister();\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-form\" onClick={handleClose}>\r\n      <div className=\"login-form-content\" onClick={(e) => e.stopPropagation()}>\r\n        <button className=\"close-btn\" onClick={handleClose}>\r\n          ✕\r\n        </button>\r\n        \r\n        <div className=\"login-form-header\">\r\n          <h2 className=\"login-form-title\">Giriş Yap</h2>\r\n          <p className=\"login-form-subtitle\">Hesabınıza giriş yapın</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">E-posta</label>\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-input\"\r\n              placeholder=\"E-posta adresiniz\"\r\n              value={usernameOrEmail}\r\n              onChange={(e) => setUsernameOrEmail(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Şifre</label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-input\"\r\n              placeholder=\"Şifreniz\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n              disabled={loading}\r\n            />\r\n          </div>\r\n\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n\r\n          <button \r\n            type=\"submit\" \r\n            className=\"submit-btn\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Giriş yapılıyor...\" : \"Giriş Yap\"}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"form-footer\">\r\n          <span className=\"switch-form-text\">\r\n            Hesabınız yok mu?\r\n          </span>\r\n          <button \r\n            type=\"button\" \r\n            className=\"switch-form-btn\"\r\n            onClick={handleSwitchToRegister}\r\n          >\r\n            Üye Ol\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}