{"ast":null,"code":"import React,{useState}from\"react\";import StarRating from\"../StarRating\";import{reviewService}from\"../../services/reviewService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RecipeReviewForm(_ref){let{recipeId,user,onReviewSubmit}=_ref;const[rating,setRating]=useState(0);const[reviewText,setReviewText]=useState(\"\");const[loading,setLoading]=useState(false);const[success,setSuccess]=useState(false);const[error,setError]=useState(\"\");const handleSubmit=async e=>{e.preventDefault();setError(\"\");setSuccess(false);if(!rating||!reviewText.trim()){setError(\"Lütfen puan ve yorum girin.\");return;}setLoading(true);try{const reviewData={RecipeId:recipeId,UserId:user.userId,ReviewText:reviewText,Rating:rating};console.log(\"Yorum gönderiliyor:\",reviewData);console.log(\"User bilgileri:\",user);const response=await reviewService.createReview(reviewData);console.log(\"Yorum response:\",response);setSuccess(true);setRating(0);setReviewText(\"\");if(onReviewSubmit)onReviewSubmit();}catch(err){var _err$response,_err$response2,_err$response3,_err$response3$data;console.error(\"Yorum hatası detayı:\",(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data);console.error(\"Yorum hatası status:\",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status);setError((err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Yorum kaydedilemedi. Lütfen tekrar deneyin.\");console.error(\"Yorum gönderme hatası:\",err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginBottom:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:12,marginBottom:8},children:[/*#__PURE__*/_jsx(StarRating,{value:rating,onChange:setRating}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"var(--text-secondary)\",fontSize:15},children:rating>0?`${rating} / 5`:\"Puan ver\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:reviewText,onChange:e=>setReviewText(e.target.value),placeholder:\"Yorumunuzu yaz\\u0131n...\",rows:3,style:{width:\"100%\",borderRadius:8,border:\"1px solid var(--border-color)\",padding:8,fontSize:15,background:\"var(--input-bg)\",color:\"var(--text-primary)\",marginBottom:8}}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"var(--error-color)\",marginBottom:8},children:error}),success&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"var(--success-color)\",marginBottom:8},children:\"Yorumunuz kaydedildi!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{background:\"var(--accent-color)\",color:\"#fff\",border:\"none\",borderRadius:8,padding:\"8px 20px\",fontWeight:500,fontSize:16,cursor:loading?\"not-allowed\":\"pointer\"},children:loading?\"Gönderiliyor...\":\"Gönder\"})]});}","map":{"version":3,"names":["React","useState","StarRating","reviewService","jsx","_jsx","jsxs","_jsxs","RecipeReviewForm","_ref","recipeId","user","onReviewSubmit","rating","setRating","reviewText","setReviewText","loading","setLoading","success","setSuccess","error","setError","handleSubmit","e","preventDefault","trim","reviewData","RecipeId","UserId","userId","ReviewText","Rating","console","log","response","createReview","err","_err$response","_err$response2","_err$response3","_err$response3$data","data","status","message","onSubmit","style","marginBottom","children","display","alignItems","gap","value","onChange","color","fontSize","target","placeholder","rows","width","borderRadius","border","padding","background","type","disabled","fontWeight","cursor"],"sources":["C:/Users/x_user/Desktop/Internship-Project-TarifKapidaFrontend/src/components/Recipe/RecipeReviewForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport StarRating from \"../StarRating\";\r\nimport { reviewService } from \"../../services/reviewService\";\r\n\r\nexport default function RecipeReviewForm({\r\n  recipeId,\r\n  user,\r\n  onReviewSubmit,\r\n}) {\r\n  const [rating, setRating] = useState(0);\r\n  const [reviewText, setReviewText] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(false);\r\n\r\n    if (!rating || !reviewText.trim()) {\r\n      setError(\"Lütfen puan ve yorum girin.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const reviewData = {\r\n        RecipeId: recipeId,\r\n        UserId: user.userId,\r\n        ReviewText: reviewText,\r\n        Rating: rating\r\n      };\r\n\r\n      console.log(\"Yorum gönderiliyor:\", reviewData);\r\n      console.log(\"User bilgileri:\", user);\r\n      \r\n      const response = await reviewService.createReview(reviewData);\r\n      console.log(\"Yorum response:\", response);\r\n      \r\n      setSuccess(true);\r\n      setRating(0);\r\n      setReviewText(\"\");\r\n      \r\n      if (onReviewSubmit) onReviewSubmit();\r\n    } catch (err) {\r\n      console.error(\"Yorum hatası detayı:\", err.response?.data);\r\n      console.error(\"Yorum hatası status:\", err.response?.status);\r\n      setError(err?.response?.data?.message || \"Yorum kaydedilemedi. Lütfen tekrar deneyin.\");\r\n      console.error(\"Yorum gönderme hatası:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ marginBottom: 16 }}>\r\n      <div style={{ display: \"flex\", alignItems: \"center\", gap: 12, marginBottom: 8 }}>\r\n        <StarRating value={rating} onChange={setRating} />\r\n        <span style={{ color: \"var(--text-secondary)\", fontSize: 15 }}>\r\n          {rating > 0 ? `${rating} / 5` : \"Puan ver\"}\r\n        </span>\r\n      </div>\r\n      <textarea\r\n        value={reviewText}\r\n        onChange={(e) => setReviewText(e.target.value)}\r\n        placeholder=\"Yorumunuzu yazın...\"\r\n        rows={3}\r\n        style={{\r\n          width: \"100%\",\r\n          borderRadius: 8,\r\n          border: \"1px solid var(--border-color)\",\r\n          padding: 8,\r\n          fontSize: 15,\r\n          background: \"var(--input-bg)\",\r\n          color: \"var(--text-primary)\",\r\n          marginBottom: 8,\r\n        }}\r\n      />\r\n      {error && <div style={{ color: \"var(--error-color)\", marginBottom: 8 }}>{error}</div>}\r\n      {success && <div style={{ color: \"var(--success-color)\", marginBottom: 8 }}>Yorumunuz kaydedildi!</div>}\r\n      <button\r\n        type=\"submit\"\r\n        disabled={loading}\r\n        style={{\r\n          background: \"var(--accent-color)\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: 8,\r\n          padding: \"8px 20px\",\r\n          fontWeight: 500,\r\n          fontSize: 16,\r\n          cursor: loading ? \"not-allowed\" : \"pointer\",\r\n        }}\r\n      >\r\n        {loading ? \"Gönderiliyor...\" : \"Gönder\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,UAAU,KAAM,eAAe,CACtC,OAASC,aAAa,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7D,cAAe,SAAS,CAAAC,gBAAgBA,CAAAC,IAAA,CAIrC,IAJsC,CACvCC,QAAQ,CACRC,IAAI,CACJC,cACF,CAAC,CAAAH,IAAA,CACC,KAAM,CAACI,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CACvC,KAAM,CAACc,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACoB,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAsB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBH,QAAQ,CAAC,EAAE,CAAC,CACZF,UAAU,CAAC,KAAK,CAAC,CAEjB,GAAI,CAACP,MAAM,EAAI,CAACE,UAAU,CAACW,IAAI,CAAC,CAAC,CAAE,CACjCJ,QAAQ,CAAC,6BAA6B,CAAC,CACvC,OACF,CAEAJ,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,KAAM,CAAAS,UAAU,CAAG,CACjBC,QAAQ,CAAElB,QAAQ,CAClBmB,MAAM,CAAElB,IAAI,CAACmB,MAAM,CACnBC,UAAU,CAAEhB,UAAU,CACtBiB,MAAM,CAAEnB,MACV,CAAC,CAEDoB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEP,UAAU,CAAC,CAC9CM,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEvB,IAAI,CAAC,CAEpC,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAAhC,aAAa,CAACiC,YAAY,CAACT,UAAU,CAAC,CAC7DM,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEC,QAAQ,CAAC,CAExCf,UAAU,CAAC,IAAI,CAAC,CAChBN,SAAS,CAAC,CAAC,CAAC,CACZE,aAAa,CAAC,EAAE,CAAC,CAEjB,GAAIJ,cAAc,CAAEA,cAAc,CAAC,CAAC,CACtC,CAAE,MAAOyB,GAAG,CAAE,KAAAC,aAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,mBAAA,CACZR,OAAO,CAACZ,KAAK,CAAC,sBAAsB,EAAAiB,aAAA,CAAED,GAAG,CAACF,QAAQ,UAAAG,aAAA,iBAAZA,aAAA,CAAcI,IAAI,CAAC,CACzDT,OAAO,CAACZ,KAAK,CAAC,sBAAsB,EAAAkB,cAAA,CAAEF,GAAG,CAACF,QAAQ,UAAAI,cAAA,iBAAZA,cAAA,CAAcI,MAAM,CAAC,CAC3DrB,QAAQ,CAAC,CAAAe,GAAG,SAAHA,GAAG,kBAAAG,cAAA,CAAHH,GAAG,CAAEF,QAAQ,UAAAK,cAAA,kBAAAC,mBAAA,CAAbD,cAAA,CAAeE,IAAI,UAAAD,mBAAA,iBAAnBA,mBAAA,CAAqBG,OAAO,GAAI,6CAA6C,CAAC,CACvFX,OAAO,CAACZ,KAAK,CAAC,wBAAwB,CAAEgB,GAAG,CAAC,CAC9C,CAAC,OAAS,CACRnB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEX,KAAA,SAAMsC,QAAQ,CAAEtB,YAAa,CAACuB,KAAK,CAAE,CAAEC,YAAY,CAAE,EAAG,CAAE,CAAAC,QAAA,eACxDzC,KAAA,QAAKuC,KAAK,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,EAAE,CAAEJ,YAAY,CAAE,CAAE,CAAE,CAAAC,QAAA,eAC9E3C,IAAA,CAACH,UAAU,EAACkD,KAAK,CAAEvC,MAAO,CAACwC,QAAQ,CAAEvC,SAAU,CAAE,CAAC,cAClDT,IAAA,SAAMyC,KAAK,CAAE,CAAEQ,KAAK,CAAE,uBAAuB,CAAEC,QAAQ,CAAE,EAAG,CAAE,CAAAP,QAAA,CAC3DnC,MAAM,CAAG,CAAC,CAAG,GAAGA,MAAM,MAAM,CAAG,UAAU,CACtC,CAAC,EACJ,CAAC,cACNR,IAAA,aACE+C,KAAK,CAAErC,UAAW,CAClBsC,QAAQ,CAAG7B,CAAC,EAAKR,aAAa,CAACQ,CAAC,CAACgC,MAAM,CAACJ,KAAK,CAAE,CAC/CK,WAAW,CAAC,0BAAqB,CACjCC,IAAI,CAAE,CAAE,CACRZ,KAAK,CAAE,CACLa,KAAK,CAAE,MAAM,CACbC,YAAY,CAAE,CAAC,CACfC,MAAM,CAAE,+BAA+B,CACvCC,OAAO,CAAE,CAAC,CACVP,QAAQ,CAAE,EAAE,CACZQ,UAAU,CAAE,iBAAiB,CAC7BT,KAAK,CAAE,qBAAqB,CAC5BP,YAAY,CAAE,CAChB,CAAE,CACH,CAAC,CACD1B,KAAK,eAAIhB,IAAA,QAAKyC,KAAK,CAAE,CAAEQ,KAAK,CAAE,oBAAoB,CAAEP,YAAY,CAAE,CAAE,CAAE,CAAAC,QAAA,CAAE3B,KAAK,CAAM,CAAC,CACpFF,OAAO,eAAId,IAAA,QAAKyC,KAAK,CAAE,CAAEQ,KAAK,CAAE,sBAAsB,CAAEP,YAAY,CAAE,CAAE,CAAE,CAAAC,QAAA,CAAC,uBAAqB,CAAK,CAAC,cACvG3C,IAAA,WACE2D,IAAI,CAAC,QAAQ,CACbC,QAAQ,CAAEhD,OAAQ,CAClB6B,KAAK,CAAE,CACLiB,UAAU,CAAE,qBAAqB,CACjCT,KAAK,CAAE,MAAM,CACbO,MAAM,CAAE,MAAM,CACdD,YAAY,CAAE,CAAC,CACfE,OAAO,CAAE,UAAU,CACnBI,UAAU,CAAE,GAAG,CACfX,QAAQ,CAAE,EAAE,CACZY,MAAM,CAAElD,OAAO,CAAG,aAAa,CAAG,SACpC,CAAE,CAAA+B,QAAA,CAED/B,OAAO,CAAG,iBAAiB,CAAG,QAAQ,CACjC,CAAC,EACL,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}