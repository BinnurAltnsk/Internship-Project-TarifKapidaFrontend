{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{reviewService}from\"../../services/reviewService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PaginatedRecipeReviewList=_ref=>{let{recipeId}=_ref;const[reviews,setReviews]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const pageSize=10;useEffect(()=>{if(!recipeId)return;const fetchReviews=async()=>{try{console.log(\"API çağrısı yapılıyor:\",{recipeId,page,pageSize});const result=await reviewService.getPagedReviewsByRecipe(recipeId,page,pageSize);console.log(\"API sonucu:\",result);setReviews(result.data);setTotalPages(result.totalPages);}catch(err){console.error(\"Yorumlar alınırken hata:\",err);}};fetchReviews();},[recipeId,page]);const handlePageClick=pageNum=>{console.log(\"Sayfa değişiyor:\",page,\"->\",pageNum);if(pageNum!==page){setPage(pageNum);}};return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"20px\"},children:reviews.length>0?/*#__PURE__*/_jsx(\"ul\",{style:{listStyleType:\"none\",padding:0},children:reviews.map(r=>/*#__PURE__*/_jsxs(\"li\",{style:{padding:\"15px\",marginBottom:\"10px\",backgroundColor:\"#f9f9f9\",borderRadius:\"8px\",border:\"1px solid #e0e0e0\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",marginBottom:\"8px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginRight:\"10px\"},children:[...Array(5)].map((_,index)=>/*#__PURE__*/_jsx(\"span\",{style:{color:index<r.rating?\"#FFD700\":\"#ddd\"},children:\"\\u2B50\"},index))}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:\"bold\",color:\"#333\"},children:[r.rating,\"/5\"]})]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:\"#555\",lineHeight:\"1.5\"},children:r.reviewText})]},r.reviewId))}):/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",color:\"#666\",fontStyle:\"italic\"},children:\"Bu tarif i\\xE7in hen\\xFCz yorum bulunmuyor.\"})}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(\"ul\",{style:{display:\"flex\",listStyleType:\"none\",padding:0,border:\"1px solid #ccc\",borderRadius:\"4px\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsx(\"li\",{onClick:()=>page>1&&handlePageClick(page-1),style:{padding:\"8px 12px\",cursor:page>1?\"pointer\":\"not-allowed\",backgroundColor:\"#fff\",borderRight:\"1px solid #ccc\",color:page>1?\"#333\":\"#ccc\",fontWeight:\"bold\"},children:\"\\xAB\"}),(()=>{const maxVisiblePages=7;let startPage=Math.max(1,page-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);if(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}const pages=[];for(let i=startPage;i<=endPage;i++){pages.push(i);}return pages.map(pageNum=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handlePageClick(pageNum),style:{padding:\"8px 12px\",cursor:\"pointer\",backgroundColor:page===pageNum?\"#4CAF50\":\"#fff\",color:page===pageNum?\"#fff\":\"#000\",fontWeight:\"bold\",borderRight:pageNum!==endPage?\"1px solid #ccc\":\"none\"},children:pageNum},pageNum));})(),/*#__PURE__*/_jsx(\"li\",{onClick:()=>page<totalPages&&handlePageClick(page+1),style:{padding:\"8px 12px\",cursor:page<totalPages?\"pointer\":\"not-allowed\",backgroundColor:\"#fff\",color:page<totalPages?\"#333\":\"#ccc\",fontWeight:\"bold\"},children:\"\\xBB\"})]})})]});};export default PaginatedRecipeReviewList;","map":{"version":3,"names":["React","useEffect","useState","reviewService","jsx","_jsx","jsxs","_jsxs","PaginatedRecipeReviewList","_ref","recipeId","reviews","setReviews","page","setPage","totalPages","setTotalPages","pageSize","fetchReviews","console","log","result","getPagedReviewsByRecipe","data","err","error","handlePageClick","pageNum","style","marginTop","children","marginBottom","length","listStyleType","padding","map","r","backgroundColor","borderRadius","border","display","alignItems","marginRight","Array","_","index","color","rating","fontWeight","margin","lineHeight","reviewText","reviewId","textAlign","fontStyle","justifyContent","overflow","onClick","cursor","borderRight","maxVisiblePages","startPage","Math","max","floor","endPage","min","pages","i","push"],"sources":["C:/Users/x_user/Desktop/Internship-Project-TarifKapidaFrontend/src/components/Review/PaginatedRecipeReviewList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { reviewService } from \"../../services/reviewService\";\r\n\r\nconst PaginatedRecipeReviewList = ({ recipeId }) => {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const pageSize = 10;\r\n\r\n  useEffect(() => {\r\n    if (!recipeId) return;\r\n\r\n    const fetchReviews = async () => {\r\n      try {\r\n        console.log(\"API çağrısı yapılıyor:\", { recipeId, page, pageSize });\r\n        const result = await reviewService.getPagedReviewsByRecipe(recipeId, page, pageSize);\r\n        console.log(\"API sonucu:\", result);\r\n        setReviews(result.data);\r\n        setTotalPages(result.totalPages);\r\n      } catch (err) {\r\n        console.error(\"Yorumlar alınırken hata:\", err);\r\n      }\r\n    };\r\n\r\n    fetchReviews();\r\n  }, [recipeId, page]);\r\n\r\n  const handlePageClick = (pageNum) => {\r\n    console.log(\"Sayfa değişiyor:\", page, \"->\", pageNum);\r\n    if (pageNum !== page) {\r\n      setPage(pageNum);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: \"20px\" }}>\r\n      {/* Yorumlar Listesi */}\r\n      <div style={{ marginBottom: \"20px\" }}>\r\n        {reviews.length > 0 ? (\r\n          <ul style={{ listStyleType: \"none\", padding: 0 }}>\r\n            {reviews.map((r) => (\r\n              <li key={r.reviewId} style={{\r\n                padding: \"15px\",\r\n                marginBottom: \"10px\",\r\n                backgroundColor: \"#f9f9f9\",\r\n                borderRadius: \"8px\",\r\n                border: \"1px solid #e0e0e0\"\r\n              }}>\r\n                <div style={{ display: \"flex\", alignItems: \"center\", marginBottom: \"8px\" }}>\r\n                  <div style={{ marginRight: \"10px\" }}>\r\n                    {[...Array(5)].map((_, index) => (\r\n                      <span key={index} style={{ color: index < r.rating ? \"#FFD700\" : \"#ddd\" }}>\r\n                        ⭐\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                  <span style={{ fontWeight: \"bold\", color: \"#333\" }}>\r\n                    {r.rating}/5\r\n                  </span>\r\n                </div>\r\n                <p style={{ margin: 0, color: \"#555\", lineHeight: \"1.5\" }}>\r\n                  {r.reviewText}\r\n                </p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (\r\n          <p style={{ textAlign: \"center\", color: \"#666\", fontStyle: \"italic\" }}>\r\n            Bu tarif için henüz yorum bulunmuyor.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Sayfalama */}\r\n      {totalPages > 1 && (\r\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n                    <ul style={{\r\n            display: \"flex\",\r\n            listStyleType: \"none\",\r\n            padding: 0,\r\n            border: \"1px solid #ccc\",\r\n            borderRadius: \"4px\",\r\n            overflow: \"hidden\"\r\n          }}>\r\n            {/* Önceki Sayfa */}\r\n            <li\r\n              onClick={() => page > 1 && handlePageClick(page - 1)}\r\n              style={{\r\n                padding: \"8px 12px\",\r\n                cursor: page > 1 ? \"pointer\" : \"not-allowed\",\r\n                backgroundColor: \"#fff\",\r\n                borderRight: \"1px solid #ccc\",\r\n                color: page > 1 ? \"#333\" : \"#ccc\",\r\n                fontWeight: \"bold\"\r\n              }}\r\n            >\r\n              «\r\n            </li>\r\n\r\n            {/* Sayfa Numaraları */}\r\n            {(() => {\r\n              const maxVisiblePages = 7;\r\n              let startPage = Math.max(1, page - Math.floor(maxVisiblePages / 2));\r\n              let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\r\n              \r\n              if (endPage - startPage + 1 < maxVisiblePages) {\r\n                startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n              }\r\n              \r\n              const pages = [];\r\n              for (let i = startPage; i <= endPage; i++) {\r\n                pages.push(i);\r\n              }\r\n              \r\n              return pages.map((pageNum) => (\r\n                <li\r\n                  key={pageNum}\r\n                  onClick={() => handlePageClick(pageNum)}\r\n                  style={{\r\n                    padding: \"8px 12px\",\r\n                    cursor: \"pointer\",\r\n                    backgroundColor: page === pageNum ? \"#4CAF50\" : \"#fff\",\r\n                    color: page === pageNum ? \"#fff\" : \"#000\",\r\n                    fontWeight: \"bold\",\r\n                    borderRight: pageNum !== endPage ? \"1px solid #ccc\" : \"none\"\r\n                  }}\r\n                >\r\n                  {pageNum}\r\n                </li>\r\n              ));\r\n            })()}\r\n\r\n            {/* Sonraki Sayfa */}\r\n            <li\r\n              onClick={() => page < totalPages && handlePageClick(page + 1)}\r\n              style={{\r\n                padding: \"8px 12px\",\r\n                cursor: page < totalPages ? \"pointer\" : \"not-allowed\",\r\n                backgroundColor: \"#fff\",\r\n                color: page < totalPages ? \"#333\" : \"#ccc\",\r\n                fontWeight: \"bold\"\r\n              }}\r\n            >\r\n              »\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default PaginatedRecipeReviewList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}